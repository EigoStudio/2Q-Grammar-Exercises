<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>20ç«  é–¢ä¿‚è©Ã—å‰ç½®è©ï¼šçœŸã®ãƒã‚¹ã‚¿ãƒ¼ãƒ†ã‚¹ãƒˆ</title>
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-pink: #ff80ab;
            --dark-pink: #c94b7b;
            --light-pink: #fce4ec;
            --bg-white: #ffffff;
            --text-black: #212121;
            --wrong-red: #ff1744;
            --correct-blue: #1e88e5;
            --en-font: "Hiragino Maru Gothic ProN", "Hiragino Maru Gothic Pro", "Yu Gothic", "Meiryo", sans-serif;
        }

        body {
            font-family: 'Kosugi Maru', var(--en-font);
            background-color: var(--light-pink);
            color: var(--text-black);
            display: flex; flex-direction: column; align-items: center; padding: 10px; margin: 0;
        }

        header { text-align: center; margin-bottom: 15px; width: 100%; max-width: 900px; }
        h1 { color: var(--dark-pink); margin: 10px 0; font-size: 1.5rem; }

        .container { 
            background: var(--bg-white); width: 98%; max-width: 800px; padding: 25px; 
            border-radius: 25px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); text-align: center; box-sizing: border-box; 
        }

        .question-box { font-size: 1.3rem; font-weight: bold; margin: 15px 0; padding: 20px; background: #fafafa; border-radius: 15px; border: 2px solid var(--primary-pink); line-height: 1.6; min-height: 80px; transition: 0.3s; }
        .question-box.solved { border-color: var(--correct-blue); background: #e3f2fd; color: var(--correct-blue); }

        .judge-btns { display: flex; justify-content: center; gap: 25px; margin-bottom: 20px; }
        .btn-judge { 
            width: 110px; height: 110px; border-radius: 50%; border: 4px solid #eee; 
            font-size: 1.8rem; font-weight: bold; cursor: pointer; transition: 0.2s; background: white;
            display: flex; align-items: center; justify-content: center;
        }
        .btn-ok { color: #4caf50; border-color: #4caf50; }
        .btn-ng { color: var(--wrong-red); border-color: var(--wrong-red); }
        .btn-judge:active { transform: scale(0.9); }

        .result-text { font-weight: bold; font-size: 2rem; margin: 10px 0; min-height: 40px; }
        
        .correction-area { display: none; margin-top: 20px; animation: fadeIn 0.4s; }
        .choice-btn { 
            display: block; width: 100%; max-width: 450px; margin: 12px auto; padding: 15px; 
            border: 2px solid #ffc1e3; border-radius: 30px; background: white; cursor: pointer; font-size: 1rem; font-family: inherit; font-weight: bold;
        }
        .choice-btn:hover { background: var(--light-pink); border-color: var(--primary-pink); }

        .next-btn { 
            display: none; background: var(--dark-pink); color: white; border: none; 
            padding: 15px 50px; border-radius: 40px; font-size: 1.2rem; cursor: pointer; margin-top: 20px; box-shadow: 0 4px 0 #880e4f;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<header>
    <h1>20ç«  é–¢ä¿‚è©Ã—å‰ç½®è©ï¼šè¦šé†’ãƒ†ã‚¹ãƒˆ</h1>
    <div id="progress" style="font-size: 1rem; font-weight: bold; color: var(--dark-pink);">Question 1 / 24</div>
</header>

<div class="container">
    <div id="resultMsg" class="result-text"></div>
    <div id="questionText" class="question-box">Loading...</div>
    
    <div id="judgeArea" class="judge-btns">
        <button class="btn-judge btn-ok" onclick="checkJudge(true)">OK</button>
        <button class="btn-judge btn-ng" onclick="checkJudge(false)">Ã—</button>
    </div>

    <div id="correctionArea" class="correction-area">
        <p style="font-weight: bold; color: var(--dark-pink);">æ­£ã—ã„ä¿®æ­£ã‚’é¸ã‚“ã§ãã ã•ã„ï¼</p>
        <div id="choicesGrid"></div>
    </div>

    <button id="nextBtn" class="next-btn" onclick="nextQuestion()">Next â†’</button>
</div>

<script>
const questions = [
    { s: "This is the house in which I was born.", ans: true, correctS: "This is the house in which I was born." },
    { s: "The man with who I was talking is my father.", ans: false, choices: ["with whom ã«å¤‰ãˆã‚‹", "with which ã«å¤‰ãˆã‚‹", "with whose ã«å¤‰ãˆã‚‹"], correctPattern: "with whom ã«å¤‰ãˆã‚‹", correctS: "The man with whom I was talking is my father." },
    { s: "That is the bus which I go to school on.", ans: true, correctS: "That is the bus which I go to school on." },
    { s: "The music which I was listening was jazz.", ans: false, choices: ["listening to ã«å¤‰ãˆã‚‹", "listening at ã«å¤‰ãˆã‚‹", "listening with ã«å¤‰ãˆã‚‹"], correctPattern: "listening to ã«å¤‰ãˆã‚‹", correctS: "The music which I was listening to was jazz." },
    { s: "I have two brothers, both of them are doctors.", ans: false, choices: ["both of whom ã«å¤‰ãˆã‚‹", "both of which ã«å¤‰ãˆã‚‹", "both of who ã«å¤‰ãˆã‚‹"], correctPattern: "both of whom ã«å¤‰ãˆã‚‹", correctS: "I have two brothers, both of whom are doctors." },
    { s: "He works for a company who name is known to everyone.", ans: false, choices: ["whose name ã«å¤‰ãˆã‚‹", "who's name ã«å¤‰ãˆã‚‹", "the name of who ã«å¤‰ãˆã‚‹"], correctPattern: "whose name ã«å¤‰ãˆã‚‹", correctS: "He works for a company whose name is known to everyone." },
    { s: "He soon made friends with children there, some of whom were fluent in English.", ans: true, correctS: "He soon friends with children there, some of whom were fluent in English." },
    { s: "She has many books, some of which are very old.", ans: true, correctS: "She has many books, some of which are very old." },
    { s: "I found several coins, one of them was a rare gold one.", ans: false, choices: ["one of which ã«å¤‰ãˆã‚‹", "one of whom ã«å¤‰ãˆã‚‹", "one of that ã«å¤‰ãˆã‚‹"], correctPattern: "one of which ã«å¤‰ãˆã‚‹", correctS: "I found several coins, one of which was a rare gold one." },
    { s: "The city in that I live is very beautiful.", ans: false, choices: ["in which ã«å¤‰ãˆã‚‹", "in where ã«å¤‰ãˆã‚‹", "in that ã‚’ whose ã«å¤‰ãˆã‚‹"], correctPattern: "in which ã«å¤‰ãˆã‚‹", correctS: "The city in which I live is very beautiful." },
    { s: "I have many foreign friends, most of whom live in Tokyo.", ans: true, correctS: "I have many foreign friends, most of whom live in Tokyo." },
    { s: "She is the lady about whom I told you.", ans: true, correctS: "She is the lady about whom I told you." },
    { s: "The pen with which I wrote the letter was red.", ans: true, correctS: "The pen with which I wrote the letter was red." },
    { s: "He has three sisters, all of whom are singers.", ans: true, correctS: "He has three sisters, all of whom are singers." },
    { s: "The shop in where she bought the dress is closed.", ans: false, choices: ["where ã ã‘ã«ã™ã‚‹", "in that ã«å¤‰ãˆã‚‹", "in which where ã«å¤‰ãˆã‚‹"], correctPattern: "where ã ã‘ã«ã™ã‚‹", correctS: "The shop where she bought the dress is closed." },
    { s: "I have three cameras, all of it are made in Japan.", ans: false, choices: ["all of which ã«å¤‰ãˆã‚‹", "all of whom ã«å¤‰ãˆã‚‹", "all of it ã‚’ all of them ã«å¤‰ãˆã‚‹"], correctPattern: "all of which ã«å¤‰ãˆã‚‹", correctS: "I have three cameras, all of which are made in Japan." },
    { s: "I need a box in which I can put these books.", ans: true, correctS: "I need a box in which I can put these books." },
    { s: "The tool with that he fixed the bike was old.", ans: false, choices: ["with which ã«å¤‰ãˆã‚‹", "with whom ã«å¤‰ãˆã‚‹", "with whose ã«å¤‰ãˆã‚‹"], correctPattern: "with which ã«å¤‰ãˆã‚‹", correctS: "The tool with which he fixed the bike was old." },
    { s: "Music is something without which I cannot live.", ans: true, correctS: "Music is something without which I cannot live." },
    { s: "He is the person whom I was looking for.", ans: true, correctS: "He is the person whom I was looking for." },
    { s: "That is the house in which she lives in.", ans: false, choices: ["æœ«å°¾ã® in ã‚’æ¶ˆã™", "in which ã‚’ where ã«å¤‰ãˆã€æœ«å°¾ã« in ã‚’æ®‹ã™", "in which ã‚’ that ã«å¤‰ãˆã€æœ«å°¾ã® in ã‚‚æ¶ˆã™"], correctPattern: "æœ«å°¾ã® in ã‚’æ¶ˆã™", correctS: "That is the house in which she lives." },
    { s: "The hotel at which we stayed was very comfortable.", ans: true, correctS: "The hotel at which we stayed was very comfortable." },
    { s: "The mountain whose top is covered with snow is Mt. Fuji.", ans: true, correctS: "The mountain whose top is covered with snow is Mt. Fuji." },
    { s: "They hired ten new workers, most of whom are very young.", ans: true, correctS: "They hired ten new workers, most of whom are very young." }
];

let currentIdx = 0;

function loadQuestion() {
    const q = questions[currentIdx];
    const qBox = document.getElementById('questionText');
    qBox.classList.remove('solved');
    document.getElementById('progress').textContent = `Question ${currentIdx + 1} / ${questions.length}`;
    qBox.innerHTML = q.s;
    document.getElementById('resultMsg').textContent = "";
    document.getElementById('correctionArea').style.display = 'none';
    document.getElementById('judgeArea').style.display = 'flex';
    document.getElementById('nextBtn').style.display = 'none';
}

function checkJudge(userAns) {
    const q = questions[currentIdx];
    const msg = document.getElementById('resultMsg');
    
    if (userAns === q.ans) {
        if (q.ans === true) {
            showSuccess();
        } else {
            showCorrectionStep();
        }
    } else {
        msg.style.color = 'var(--wrong-red)';
        msg.textContent = "Wrong! Look closer.";
    }
}

function showCorrectionStep() {
    document.getElementById('judgeArea').style.display = 'none';
    const area = document.getElementById('correctionArea');
    const grid = document.getElementById('choicesGrid');
    area.style.display = 'block';
    grid.innerHTML = "";
    
    const q = questions[currentIdx];
    
    // ã“ã“ã§é¸æŠè‚¢ã‚’å®Œå…¨ã«ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¾ã™
    const shuffledChoices = [...q.choices].sort(() => Math.random() - 0.5);
    
    shuffledChoices.forEach((choice) => {
        const btn = document.createElement('button');
        btn.className = 'choice-btn';
        btn.textContent = choice;
        btn.onclick = () => {
            if (choice === q.correctPattern) {
                showSuccess();
            } else {
                alert("ãã®ä¿®æ­£ã ã¨ã¾ã æ–‡ãŒä¸è‡ªç„¶ã ã‚ˆã€‚");
            }
        };
        grid.appendChild(btn);
    });
}

function showSuccess() {
    const q = questions[currentIdx];
    const qBox = document.getElementById('questionText');
    
    qBox.innerHTML = `âœ… ${q.correctS}`;
    qBox.classList.add('solved');
    
    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#1e88e5', '#ffffff', '#212121'] });
    
    const msg = document.getElementById('resultMsg');
    msg.style.display = 'block';
    msg.style.color = 'var(--correct-blue)';
    msg.textContent = "Correct! âœ¨";

    document.getElementById('correctionArea').style.display = 'none';
    document.getElementById('judgeArea').style.display = 'none';
    document.getElementById('nextBtn').style.display = 'inline-block';
}

function nextQuestion() {
    currentIdx++;
    if (currentIdx < questions.length) {
        loadQuestion();
    } else {
        document.querySelector('.container').innerHTML = "<h2 style='color:var(--dark-pink);'>All Clear! ğŸ†</h2><p>whose ã®ä½¿ã„ã“ãªã—ã‚‚å®Œç’§ã§ã™ï¼</p><button onclick='location.reload()' class='next-btn' style='display:inline-block;'>æœ€åˆã‹ã‚‰æŒ‘æˆ¦ã™ã‚‹</button>";
    }
}

window.onload = loadQuestion;
</script>
</body>
</html>